{% extends 'base.html' %}

{% block title %}News Archive{% endblock %}

{% block content %}
  <h1>News Archive</h1>

  <aside>
    <p>Filter by Committee:</p>
    <ul>
      {% for committee in all_committees %}
        <li>
          <a href="{% url 'news:archive' %}?committee={{ committee.slug }}">
            {{ committee.group.name }}
          </a>
        </li>
      {% endfor %}
    </ul>
    {% if filtered_committee %}
      <p>
        <a href="{% url 'news:archive' %}">Remove Filter</a>
      </p>
    {% endif %}
  </aside>

  <h2>
    {% if filtered_committee %}
      News for {{ filtered_committee.group.name }}
    {% else %}
      News by All Committees
    {% endif %}
  </h2>

  {% for year, months in grouped_news.items %}
    <article>
      <h3>{{ year }}</h3>
      {% for month, news in months.items %}
        <h4>{{ month }}</h4>
        <ul>
          {% for post in news %}
            <li>
              <h5><a href="{% url 'news:detail' post.slug %}">{{ post.title }}</a></h5>
              <p>{{ post.created_at|date:"F j, Y" }}</p>
            </li>
          {% endfor %}
        </ul>
      {% endfor %}
      <hr />
    </article>
  {% endfor %}
{% endblock %}